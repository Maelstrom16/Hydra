# Hydra
An emulator for a number of retro game systems, written mostly to play around with Rust.

## Files
* **src/** - *Contains all Rust code.*
    * **common.rs** - *Contains all code to be shared between emulators.*
        * **emulator.rs** - *Defines the Emulator trait and other related types.*
        * **errors.rs** - *Defines HydraIOError and conversions from other error types.*
    * **config.rs** - *Handles serialization/deserialization of user configurations.*
    * **ext.rs** - *Holds macros for easily interfacing with external crates (currently, only genawaiter).*
        * **genawaiter.rs** - *Defines the `gen_all!` macro, used for nesting coroutines*
    * **gameboy.rs** - *Organizes the data necessary to construct a Game Boy emulator.*
        * **cpu.rs** - *Emulates the Game Boy's Sharp LR35902 processor.*
            * **opcode.rs** - *Holds the instruction set as a pair of function tables, as well as operand definitions*
        * **memory.rs** - *Encapsulates the components which make up the Game Boy's memory space.*
            * **cartmbc.rs** - *Defines the CartridgeMemoryBankController trait, used to interpret ROM data as a cartridge.*
                * **mbc0.rs** - *Defines a cartridge with no memory bank controller.*
            * **consmbc.rs** - *Defines the ConsoleMemoryBankController trait, used to hold bankable VRAM and WRAM.*
                * **dmg.rs** - *Defines a DMG Game Boy's memory (i.e. no banking is used).*
            * **io.rs** - *Encapsulates every `Cell<u8>` that makes up the Game Boy's IO range.*
            * **oam.rs** - *Defines the OAM struct, along with helper functions to handle inaccessibility and the corruption bug.*
        * **ppu.rs** - *Renders graphics from the Game Boy's memory.*
            * **fifo.rs** - *Progressively pushes graphics data fetched from memory to a queue for rendering*
    * **graphics.rs** - *Code used for rendering content to the window.*
    * **main.rs** - *Contains the main method. Initializes the main event handler.*
    * **ui.rs** - *Constructs and applies menus to the main window.*
    * **window.rs** - *Code used for building the window itself, including menus and event handling*
* **Cargo.lock** - *Automatically generated by Cargo. Contains metadata about this project, including references to all of the libraries required for its dependencies to function.*
* **Cargo.toml** - *Contains metadata about this project, including version and dependency information.*
* **config.toml** - *Currently empty, but will be used to store emulator-specific settings (e.g. control mappings).*
* **README.md** - *This file*

## Testing
To run this application, run the following in the terminal:
```
cargo run --release
```
The `--release` flag is not strictly necessaryâ€”however, it offers a decent boost in performance.

In its current state, the program will generate a window with some dummy options whose functionality is to be implemented once the GB emulator is able to support them. Currently, only the DMG emulator is functional. Loading a ROM into any original Game Boy console will launch the emulator (which I have nicknamed "Wyrm"). The CPU will run cycles in the background, and the PPU will render noise to a single, gradated triangle on the viewport to ensure wgpu can handle a dynamically-generated texture of the Game Boy's screen size.

I plan to support Windows, MacOS, and Linux, but I do not currently have the means to test the program on Linux. As such, it may be buggy there.